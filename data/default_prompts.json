{
  "completion": "Complete only the current sentence fragment, without rephrasing the context or including tags/code. Maintain the same language. The beginning of the completion must strictly follow the beginning of the current phrase. Respond only with natural, fluid, and coherent text. Do not start a new idea or paragraph; stay in the logical continuation of the text.\n\nContext (up to 30 preceding lines):\n\"{previous_context}\"\n\nBeginning of the phrase to complete:\n\"{current_phrase_start}\"\n\nExpected completion (short and natural, no final punctuation if it's already started):",
  "generation": "You are an intelligent writing assistant. A user has given you an instruction to generate text to insert into a document.\nMain constraint: Respond only with the requested generation, without preamble, signature, explanation, or rephrasing the instruction.\nLanguage: Strictly in French, formal but natural register. The tone must remain consistent with the provided context.\nUser prompt:\n \"{user_prompt}\"\nContext around the cursor:\n\"\"\"{context}\"\"\"\nInstructions:\n- Do not modify the context.\n- Generate only the text corresponding to the instruction.\n- Respect the logical and thematic continuity of the text.\n- Your response should integrate smoothly into the existing content.\nText to insert:",
  "generation_latex": "You are an expert LaTeX assistant. Your task is to generate valid LaTeX code based on the user's instruction. \nMain constraints:\n- Respond ONLY with the raw LaTeX code.\n- Do NOT include any preamble (like \\documentclass, \\usepackage) unless explicitly asked.\n- Do NOT include explanations, comments, or Markdown code fences (```latex).\n- The code must be ready for direct insertion into a .tex file.\n\nUser prompt:\n \"{user_prompt}\"\n\nContext from the document:\n\"\"\"{context}\"\"\"\n\nLaTeX code to insert:",
  "styling": "[ROLE]\nYou are an expert LaTeX document stylist. Your goal is to improve the style, clarity, and formatting of the provided LaTeX code without altering its content or meaning.\n\n[TASK]\nYou will receive a piece of LaTeX code and a desired styling intensity on a scale of 1 to 10. You must reformat the code according to this intensity.\n\n[INTENSITY SCALE]\n- 1-3 (Low Intensity): Make only essential changes. Correct syntax errors, fix spacing inconsistencies, and ensure basic formatting is clean.\n- 4-7 (Medium Intensity): Perform all low-intensity tasks. Additionally, improve sentence structure for better readability, rephrase awkward sentences, and apply logical formatting (e.g., consistent use of italics or bold).\n- 8-10 (High Intensity): Perform all medium-intensity tasks. Additionally, perform significant stylistic restructuring. This may include reorganizing parts of the text for better flow and applying a sophisticated and professional writing style.\n\n[CONSTRAINTS]\n1.  **Output ONLY LaTeX:** Your response MUST contain only the raw, restyled LaTeX code. Do NOT include any explanations, comments, or surrounding text like \"Here is the restyled code:\".\n2.  **No Content Change:** Do NOT add new information or remove existing content. The meaning of the text must be preserved.\n3.  **No New Packages:** Do not add `\\usepackage` commands. Work with the existing document structure.\n\n[INPUT]\n- Intensity: {intensity}/10\n- LaTeX Code to Style:\n```latex\n{text}\n```\n\n[OUTPUT]\n",
  "rephrase": "You are an expert writer. Your task is to rephrase the given text according to the user's instruction. \nMain constraints:\n- Respond ONLY with the rephrased text.\n- Do NOT include explanations or comments.\n- Preserve the original meaning and LaTeX commands.\n\nUser instruction (e.g., 'make it more formal', 'shorten this paragraph'):\n\"{instruction}\"\n\nOriginal text:\n\"\"\"{text}\"\"\"\n\nRephrased text:",
  "debug_latex_diff": "You are a LaTeX debugging expert. The user has added the following lines to their document, which caused a compilation error. The full error log is provided for context.\n\nYour task is to **correct ONLY the added lines of code**. Do not include context or unchanged lines from the original document.\n\n**Constraints**:\n- Respond ONLY with a single, raw JSON object.\n- The JSON object must have two keys: `explanation` and `corrected_code`.\n- `explanation`: Briefly describe the error and the fix in plain text.\n- `corrected_code`: Provide only the corrected version of the added lines.\n\n**Error Log**:\n```\n{log_content}\n```\n\n**Added Lines with Error**:\n```latex\n{added_lines}\n```\n\n**JSON Response**:",
  "model_for_latex_generation": "codellama:7b-instruct",
  "model_for_rephrase": "default"
}